<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:s="http://myfaces.apache.org/sandbox">

<ui:composition template="/main/template.xhtml">

  <ui:param name="pageTitle" value="Study Viewer" />
  <ui:param name="pageHelpURL" value="screens/studyViewerHelp.jsf" />

	<ui:define name="body">

	<t:panelGrid columns="1" width="100%">
		<ui:include src="studyDetailViewer.xhtml" />

		<h:form id="studyAnnotationsPanelForm">
			<t:collapsiblePanel id="annotationTypesPanel"
				value="#{studyViewer.isPanelCollapsedMap['annotationTypes']}"
				title="Annotation Types" var="isCollapsed" titleVar="title">
				<f:facet name="header">
					<s:roundedDiv borderWidth="4" color="#{menu.screensaverThemeColor}" radius="4"
						styleClass="transparentSubsectionHeader">
						<t:headerLink immediate="true" styleClass="transparentSubsectionHeader">
							<h:graphicImage
								value="#{isCollapsed ? &quot;/images/collapsed.png&quot; : &quot;/images/expanded.png&quot;}"
								styleClass="icon" />
							<h:outputText value="#{title}" styleClass="transparentSubsectionHeader" />
						</t:headerLink>
						</s:roundedDiv>
				</f:facet>

				<t:dataTable id="annotationTypesTable"
					value="#{studyViewer.annotationTypesTable.dataModel}" var="row"
					rendered="#{!isCollapsed}" styleClass="standardTable"
					headerClass="tableHeader" rowClasses="row1,row2">
					<t:column styleClass="keyColumn">
						<f:facet name="header">
							<t:outputText value="Annotation Name" />
						</f:facet>
						<t:outputText value="#{row.rowLabel}" escape="false"
							title="#{row.rowDescription}" />
					</t:column>
					<t:columns
						value="#{studyViewer.annotationTypesTable.columnModel}"
						var="columnName" styleClass="column">
						<f:facet name="header">
							<t:outputText value="#{columnName}" />
						</f:facet>
						<t:outputText
							value="#{studyViewer.annotationTypesTable.cellValue}" />
					</t:columns>
				</t:dataTable>
			</t:collapsiblePanel>

			<t:collapsiblePanel id="reagentsDataPanel"
				value="#{studyViewer.isPanelCollapsedMap['reagentsData']}"
				title="Reagents" var="isCollapsed" titleVar="title">
				<f:facet name="header">
					<s:roundedDiv borderWidth="4" color="#{menu.screensaverThemeColor}" radius="4"
						styleClass="transparentSubsectionHeader">
						<t:headerLink immediate="true" styleClass="transparentSubsectionHeader">
							<h:graphicImage
								value="#{isCollapsed ? &quot;/images/collapsed.png&quot; : &quot;/images/expanded.png&quot;}"
								styleClass="icon" />
							<h:outputText value="#{title}" styleClass="transparentSubsectionHeader" />
						</t:headerLink>
					</s:roundedDiv>
				</f:facet>
			</t:collapsiblePanel>

		</h:form>

		<t:div rendered="#{! empty studyViewer.study &amp;&amp; ! studyViewer.isPanelCollapsedMap['reagentsData']}">
            <ui:include src="../libraries/reagentSearchResultsBody.xhtml">
                <ui:param name="reagentsBrowser" value="#{studyViewer.reagentSearchResults}" />
            </ui:include>
		</t:div>
		
	</t:panelGrid>

	</ui:define>

</ui:composition>

</html>
