<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="t"%>
<%@ taglib uri="http://struts.apache.org/tags-tiles" prefix="tiles"%>

<f:subview id="searchResultsRowDetail">

	<t:dataTable id="detailTable"
		value="#{searchResults.rowDetail.dataModel}" var="row" styleClass="standardTable"
		headerClass="tableHeader" rowClasses="row1,row2"
		sortColumn="#{searchResults.rowDetail.sortManager.sortColumnName}"
		sortAscending="#{searchResults.rowDetail.sortManager.sortAscending}" width="100%">
		<t:columns value="#{searchResults.rowDetail.sortManager.columnModel}" var="column"
			styleClass="column">

			<f:facet name="header">
				<t:commandSortHeader columnName="#{column.name}" arrow="false"
					immediate="false" title="#{column.description}">
					<f:facet name="ascending">
						<t:graphicImage value="/images/ascending-arrow.gif"
							rendered="true" border="0" />
					</f:facet>
					<f:facet name="descending">
						<t:graphicImage value="/images/descending-arrow.gif"
							rendered="true" border="0" />
					</f:facet>
					<t:outputText value="#{column.name}" />
				</t:commandSortHeader>
			</f:facet>

			<t:outputText value="#{searchResults.rowDetail.cellValue}"
				rendered="#{! (column.isCommandLink || column.isCommandLinkList)}" />
			<t:commandLink action="#{searchResults.rowDetail.cellAction}"
				value="#{searchResults.rowDetail.cellValue}" rendered="#{column.isCommandLink}">
				<f:param name="commandValue"
					value="#{searchResults.rowDetail.escapeBackslashes[searchResults.rowDetail.cellValue]}" />
			</t:commandLink>
			<t:dataList id="commandLinkList" var="commandValue"
				value="#{searchResults.rowDetail.cellValue}" layout="simple"
				rendered="#{column.isCommandLinkList}" rowIndexVar="rowIndex"
				rowCountVar="rowCount">
				<t:commandLink action="#{searchResults.rowDetail.cellAction}" value="#{commandValue}">
					<f:param name="commandValue"
						value="#{searchResults.rowDetail.escapeBackslashes[commandValue]}" />
				</t:commandLink>
				<t:outputText value=";" rendered="#{rowIndex < rowCount - 1}" />
			</t:dataList>
		</t:columns>
	</t:dataTable>

</f:subview>
